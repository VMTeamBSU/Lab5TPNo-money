
language: c

jobs:
  include:
    - stage: build
      os: windows
      script: 
      - "mkdir build"
      - "cd build"
      - "cmake \"Visual Studio 16 2019\" .."
      - "cmake --build . --config Release"
      - if [ $TRAVIS_OS_NAME != windows ]; then ./tst/ExampleProject_tst; fi

      # Set up git user name and tag this commit
      - git config --local user.name "rexxmagtar"
      - git config --local user.email "rexx.magtar@gmail.com"
      - export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
      - git tag $TRAVIS_TAG
      deploy:
         provider: releases
         api_key: "bba57e1400ec83b5c99ebda9aa9fc96884b8bdbb"
         file: "CMakeLists"
         skip_cleanup: true
         on:
           branch: frontEnd


